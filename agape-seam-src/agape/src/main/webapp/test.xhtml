<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="/layouts/themes/candy/template/_template.xhtml">

	<ui:define name="body">
		<a4j:form>
			<s:div id="users_menu" styleClass="_toolbar _radius10">

				<a4j:commandLink styleClass="_button _icon_edit"
					action="#{userList.edytuj}" value="Edytuj" id="idEditButton"
					reRender="user_panel"
					oncomplete="#{rich:component('user_panel')}.show()">
				</a4j:commandLink>

				<a4j:commandLink styleClass="_button _icon_add"
					action="#{userList.dodaj}" value="Dodaj" id="idAddButton"
					reRender="user_panel"
					oncomplete="#{rich:component('user_panel')}.show()">
				</a4j:commandLink>

			</s:div>

			<rich:extendedDataTable id="tabela" value="#{userListDataModel}"
				var="_user" sortMode="single" selectionMode="single"
				selection="#{userList.selectedUser}" reRender="scroller"
				rows="#{viewState.rowsOnPage}" height="#{viewState.tableHeight}"
				noDataLabel="Brak danych" lang="pl" frame="box">

				<rich:column id="col1" label="Nazwisko" sortable="true"
					sortBy="#{_user.nazwisko}" filterBy="#{_user.nazwisko}"
					filterEvent="onchange">
					<f:facet name="header">
						<h:outputText value="Nazwisko" />
					</f:facet>
					<h:outputText value="#{_user.nazwisko}" />
				</rich:column>
				<rich:column id="col2" label="Imię" sortable="true"
					sortBy="#{_user.imie}" filterBy="#{_user.imie}"
					filterEvent="onchange">
					<f:facet name="header">
						<h:outputText value="Imię" />
					</f:facet>
					<h:outputText value="#{_user.imie}" />
				</rich:column>
			</rich:extendedDataTable>
			<ui:include src="/pages/components/dataScroller.xhtml">
				<ui:param name="idScroller" value="scroller" />
				<ui:param name="rowsOnPage" value="#{viewState.rowsOnPage}" />
				<ui:param name="numeryWierszy" value="#{viewState.numeryWierszy}" />
				<ui:param name="method_bean" value="#{viewState}" />
				<ui:param name="method" value="changeRowNum" />
				<ui:param name="reRender" value="tabela, scroller" />
				<ui:param name="idTabela" value="tabela" />
			</ui:include>

		</a4j:form>

		<rich:hotKey id="#{id}_escKey" key="esc"
			handler="#{rich:component('user_panel')}.hide()" />

		<rich:modalPanel id="user_panel" width="350" height="400">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Educja użytkowników"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:outputText value="Zamknij" id="#{id}_hidelink" />
					<rich:componentControl for="user_panel" attachTo="hidelink"
						operation="hide" event="onclick" />
				</h:panelGroup>
			</f:facet>
			<a4j:outputPanel ajaxRendered="true">
				<a4j:form>

					<h:panelGrid columns="3">
						<h:outputLabel for="nazwiskoPopup" value="Nazwisko" />
						<h:inputText id="nazwiskoPopup" required="true"
							value="#{userList.edytowanyUser.nazwisko}">
							<s:validate />
						</h:inputText>
						<h:message for="nazwiskoPopup" />

						<h:outputLabel for="imiePopup" value="Imię" />
						<h:inputText id="imiePopup" value="#{userList.edytowanyUser.imie}"
							required="true">
							<s:validate />
						</h:inputText>
						<h:message for="imiePopup" />

						<h:outputLabel for="loginPopup" value="Login" />
						<h:inputText id="loginPopup"
							value="#{userList.edytowanyUser.ULogin}">
							<s:validate />
						</h:inputText>
						<h:message for="loginPopup" />

						<h:outputLabel for="hasloPopup" value="Hasło" />
						<h:inputText id="hasloPopup"
							value="#{userList.edytowanyUser.haslo}">
							<s:validate />
						</h:inputText>
						<h:message for="hasloPopup" />

						<h:outputLabel for="mailPopup" value="Email" />
						<h:inputText id="mailPopup"
							value="#{userList.edytowanyUser.email}">
							<s:validate />
						</h:inputText>
						<h:message for="mailPopup" />

						<h:outputLabel for="dataOdPopup" value="Data od" />
						<rich:calendar id="dataOdPopup"
							value="#{userList.edytowanyUser.dataOd}">
							<s:validate />
						</rich:calendar>
						<h:message for="dataOdPopup" />

						<h:outputLabel for="dataDoPopup" value="Data do" />
						<rich:calendar id="dataDoPopup"
							value="#{userList.edytowanyUser.dataDo}">
							<s:validate />
						</rich:calendar>
						<h:message for="dataDoPopup" />

						<h:outputLabel for="uwagiPopup" value="Uwagi" />
						<h:inputText id="uwagiPopup"
							value="#{userList.edytowanyUser.uwagi}">
							<s:validate />
						</h:inputText>
						<h:message for="uwagiPopup" />

						<h:outputLabel for="statusPopup" value="Status" />
						<h:selectOneMenu id="statusPopup"
							value="#{userList.edytowanyUser.status}">
							<f:selectItem itemLabel="A" itemValue="A" />
							<f:selectItem itemLabel="H" itemValue="H" />
						</h:selectOneMenu>
						<h:message for="statusPopup" />

						<a4j:commandButton id="submit" action="#{userList.zapisz}"
							value="Zapisz" reRender="tabela"
							oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('user_panel')}.hide();">
						</a4j:commandButton>
					</h:panelGrid>

				</a4j:form>
			</a4j:outputPanel>
		</rich:modalPanel>



	</ui:define>
</ui:composition>



<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="/WEB-INF/templates/portalTemplate.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:my="http://java.sun.com/jsf/composite/components">
	<ui:define name="content">

		<h:form>

			<rich:panel>
				<f:facet name="header">
					<h:outputText value="Lista Pytań" />
				</f:facet>
				<rich:toolbar id="menu">
					<a4j:commandButton action="#{questionsBrowser.goToLessons()}"
						value="Wróc do lekcji" immediate="true" styleClass="buttonSmall" />
					<rich:toolbarGroup>
							<h:commandButton value="Dodaj pytanie" styleClass="buttonSmall"
								action="#{questionsBrowser.add()}" render="@form,tresc"
								disabled="#{questionsBrowser.editMode}"/>

					</rich:toolbarGroup>
				</rich:toolbar>

				<rich:panel id="edycjaPanel" rendered="#{questionsBrowser.editMode}">

						<h:panelGrid columns="3">

							<ui:decorate template="/layout/field.xhtml">
								<ui:param name="label" value="Nr pytania" />
								<ui:param name="id" value="nrPytania" />
								<ui:param name="required" value="true" />
								
								<h:inputText id="nrPytania"
									value="#{questionsBrowser.question.number}" required="true" />
							</ui:decorate>

							<ui:decorate template="/layout/field.xhtml">
								<ui:param name="label" value="Wyświetl na stronie" />
								<ui:param name="id" value="widocznoscPytania" />
								<ui:param name="required" value="false" />
								<h:selectBooleanCheckbox id="widocznoscPytania"
									value="#{questionsBrowser.question.enabled}" />
							</ui:decorate>


						</h:panelGrid>
						<rich:editor id="tresc"  value="#{questionsBrowser.question.content}" toolbar="custom" >
							<f:facet name="config">
	                    toolbar_custom:
	                        [
	                            { name: 'document', items : [ 'NewPage','Preview' ] },
	                            { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },
	                            { name: 'editing', items : [ 'Find','Replace','-','SelectAll','-','Scayt' ] },
	                            { name: 'insert', items : [ 'Table','HorizontalRule','Smiley','SpecialChar','PageBreak' ] },
	                                    '/',
	                            { name: 'styles', items : [ 'Styles','Format' ] },
	                            { name: 'basicstyles', items : [ 'Bold','Italic','Strike','-','RemoveFormat' ] },
	                            { name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote' ] },
	                            { name: 'links', items : [ 'Link','Unlink' ] }
	                        ]
	                    </f:facet>
						</rich:editor>
						<h:panelGrid columns="5">
							<a4j:commandButton id="submit"
								action="#{questionsBrowser.save()}" value="Zapisz"
								render="@form,tabela" execute="@region" />
							<a4j:commandButton id="cancel" immediate="true"
								action="#{questionsBrowser.closeEditMode()}" render="@form"
								value="Wyjdź">
							</a4j:commandButton>
						</h:panelGrid>


				</rich:panel>

				<rich:dataGrid value="#{questionsBrowser.questions}" var="_row"
					style="width:100%" columns="1">
					<h:outputText value="Pytanie #{_row.number}  "
						style="font-weight: bold;#{_row.enabled ? '' : 'color:grey;'}" />
					<h:commandLink value="edytuj"
						action="#{questionsBrowser.edit(_row.id)}" render="@form"
						disabled="#{questionsBrowser.editMode}" />
					<br />


					<h:outputText value="#{_row.content}" escape="false"
						style="#{_row.enabled ? '' : 'color:grey;'}" />




				</rich:dataGrid>
			</rich:panel>
		</h:form>
	</ui:define>

</ui:composition>